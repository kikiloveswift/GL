# TSRM çŸ©é˜µå˜æ¢è¯¦è§£

## ðŸ“– æ¦‚è¿°

TSRM æ˜¯ 3D å›¾å½¢å­¦ä¸­æœ€åŸºç¡€ä¹Ÿæ˜¯æœ€é‡è¦çš„æ¦‚å¿µä¹‹ä¸€ï¼Œä»£è¡¨äº†å››ç§åŸºæœ¬çš„å‡ ä½•å˜æ¢ï¼š
- **T** - Translationï¼ˆå¹³ç§»ï¼‰
- **S** - Scaleï¼ˆç¼©æ”¾ï¼‰
- **R** - Rotationï¼ˆæ—‹è½¬ï¼‰
- **M** - Modelï¼ˆæ¨¡åž‹çŸ©é˜µï¼‰

è¿™äº›å˜æ¢çš„ç»„åˆæž„æˆäº†æ¨¡åž‹çŸ©é˜µï¼ˆModel Matrixï¼‰ï¼Œç”¨äºŽå°†ç‰©ä½“ä»Žæœ¬åœ°åæ ‡ç³»å˜æ¢åˆ°ä¸–ç•Œåæ ‡ç³»ã€‚

## ðŸ”¢ æ•°å­¦åŸºç¡€

### é½æ¬¡åæ ‡ç³»

åœ¨ 3D å›¾å½¢å­¦ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ 4Ã—4 çŸ©é˜µå’Œé½æ¬¡åæ ‡æ¥è¡¨ç¤ºå˜æ¢ï¼š

```
ç‚¹: (x, y, z, 1)
å‘é‡: (x, y, z, 0)
```

### å˜æ¢çŸ©é˜µçš„ç»„åˆé¡ºåº

**å…³é”®æ¦‚å¿µ**ï¼šçŸ©é˜µä¹˜æ³•ä¸æ»¡è¶³äº¤æ¢å¾‹ï¼å˜æ¢çš„é¡ºåºéžå¸¸é‡è¦ã€‚

æ ‡å‡†çš„å˜æ¢é¡ºåºæ˜¯ï¼š**M = T Ã— R Ã— S**

```
æœ€ç»ˆçŸ©é˜µ = å¹³ç§»çŸ©é˜µ Ã— æ—‹è½¬çŸ©é˜µ Ã— ç¼©æ”¾çŸ©é˜µ
```

## ðŸŽ¯ å„ç§å˜æ¢è¯¦è§£

### 1. ç¼©æ”¾å˜æ¢ (Scale)

ç¼©æ”¾å˜æ¢æ”¹å˜ç‰©ä½“çš„å¤§å°ï¼Œæ²¿ç€å„ä¸ªè½´ç‹¬ç«‹è¿›è¡Œã€‚

#### æ•°å­¦è¡¨ç¤º

```
S = [sx  0   0   0 ]
    [0   sy  0   0 ]
    [0   0   sz  0 ]
    [0   0   0   1 ]
```

#### ç‰¹ç‚¹
- `sx, sy, sz` åˆ†åˆ«æ˜¯ Xã€Yã€Z è½´çš„ç¼©æ”¾å› å­
- `sx = sy = sz = 1`ï¼šæ— ç¼©æ”¾
- `sx = sy = sz > 1`ï¼šç­‰æ¯”æ”¾å¤§
- `sx = sy = sz < 1`ï¼šç­‰æ¯”ç¼©å°
- ä¸åŒè½´ä½¿ç”¨ä¸åŒç¼©æ”¾å› å­ï¼šéžç­‰æ¯”ç¼©æ”¾

#### ç¤ºä¾‹
```cpp
// GLM ä»£ç ç¤ºä¾‹
glm::mat4 scale = glm::scale(glm::mat4(1.0f), glm::vec3(2.0f, 1.5f, 0.5f));
// Xè½´æ”¾å¤§2å€ï¼ŒYè½´æ”¾å¤§1.5å€ï¼ŒZè½´ç¼©å°åˆ°0.5å€
```

### 2. æ—‹è½¬å˜æ¢ (Rotation)

æ—‹è½¬å˜æ¢å›´ç»•æŸä¸ªè½´æ—‹è½¬ç‰©ä½“ã€‚

#### ç»• X è½´æ—‹è½¬
```
Rx(Î¸) = [1   0      0     0]
        [0   cos(Î¸) -sin(Î¸) 0]
        [0   sin(Î¸)  cos(Î¸) 0]
        [0   0       0      1]
```

#### ç»• Y è½´æ—‹è½¬
```
Ry(Î¸) = [cos(Î¸)  0  sin(Î¸)  0]
        [0       1  0       0]
        [-sin(Î¸) 0  cos(Î¸)  0]
        [0       0  0       1]
```

#### ç»• Z è½´æ—‹è½¬
```
Rz(Î¸) = [cos(Î¸) -sin(Î¸) 0  0]
        [sin(Î¸)  cos(Î¸) 0  0]
        [0       0      1  0]
        [0       0      0  1]
```

#### æ¬§æ‹‰è§’ç»„åˆ

ç»„åˆæ—‹è½¬é€šå¸¸ä½¿ç”¨æ¬§æ‹‰è§’ï¼š**R = Rz(Î³) Ã— Ry(Î²) Ã— Rx(Î±)**

```cpp
// GLM ä»£ç ç¤ºä¾‹
glm::mat4 rotationX = glm::rotate(glm::mat4(1.0f), glm::radians(45.0f), glm::vec3(1, 0, 0));
glm::mat4 rotationY = glm::rotate(glm::mat4(1.0f), glm::radians(30.0f), glm::vec3(0, 1, 0));
glm::mat4 rotationZ = glm::rotate(glm::mat4(1.0f), glm::radians(60.0f), glm::vec3(0, 0, 1));
glm::mat4 rotation = rotationZ * rotationY * rotationX;
```

### 3. å¹³ç§»å˜æ¢ (Translation)

å¹³ç§»å˜æ¢ç§»åŠ¨ç‰©ä½“çš„ä½ç½®ã€‚

#### æ•°å­¦è¡¨ç¤º
```
T = [1  0  0  tx]
    [0  1  0  ty]
    [0  0  1  tz]
    [0  0  0  1 ]
```

#### ç‰¹ç‚¹
- `tx, ty, tz` åˆ†åˆ«æ˜¯ Xã€Yã€Z è½´çš„å¹³ç§»è·ç¦»
- å¹³ç§»ä¸æ”¹å˜ç‰©ä½“çš„å½¢çŠ¶å’Œå¤§å°
- åªæ”¹å˜ç‰©ä½“çš„ä½ç½®

#### ç¤ºä¾‹
```cpp
// GLM ä»£ç ç¤ºä¾‹
glm::mat4 translation = glm::translate(glm::mat4(1.0f), glm::vec3(5.0f, -2.0f, 3.0f));
// å‘Xè½´æ­£æ–¹å‘ç§»åŠ¨5å•ä½ï¼ŒYè½´è´Ÿæ–¹å‘ç§»åŠ¨2å•ä½ï¼ŒZè½´æ­£æ–¹å‘ç§»åŠ¨3å•ä½
```

## âš¡ å˜æ¢é¡ºåºçš„é‡è¦æ€§

### ä¸ºä»€ä¹ˆæ˜¯ T Ã— R Ã— Sï¼Ÿ

1. **ç¼©æ”¾ (S) é¦–å…ˆåº”ç”¨**ï¼š
   - åœ¨ç‰©ä½“çš„æœ¬åœ°åæ ‡ç³»ä¸­è¿›è¡Œ
   - ä¸ä¼šå½±å“ç‰©ä½“çš„ä½ç½®å’Œæ–¹å‘

2. **æ—‹è½¬ (R) å…¶æ¬¡åº”ç”¨**ï¼š
   - å›´ç»•åŽŸç‚¹æ—‹è½¬å·²ç¼©æ”¾çš„ç‰©ä½“
   - æ­¤æ—¶ç‰©ä½“ä»åœ¨åŽŸç‚¹é™„è¿‘

3. **å¹³ç§» (T) æœ€åŽåº”ç”¨**ï¼š
   - å°†æ—‹è½¬åŽçš„ç‰©ä½“ç§»åŠ¨åˆ°æœ€ç»ˆä½ç½®
   - ä¸ä¼šå½±å“ç‰©ä½“çš„å½¢çŠ¶å’Œæ–¹å‘

### é”™è¯¯é¡ºåºçš„åŽæžœ

å¦‚æžœä½¿ç”¨ **S Ã— R Ã— T** é¡ºåºï¼š
- å¹³ç§»ä¼šå…ˆæ‰§è¡Œï¼Œç‰©ä½“ç§»åŠ¨åˆ°æ–°ä½ç½®
- ç„¶åŽæ—‹è½¬ä¼šå›´ç»•åŽŸç‚¹æ—‹è½¬ï¼Œå¯¼è‡´ç‰©ä½“"ç»•åœˆ"
- æœ€åŽç¼©æ”¾å¯èƒ½ä¼šäº§ç”Ÿæ„å¤–çš„æ•ˆæžœ

## ðŸŽ® å®žè·µç¤ºä¾‹

### å®Œæ•´çš„å˜æ¢æµç¨‹

```cpp
// 1. å®šä¹‰å˜æ¢å‚æ•°
glm::vec3 translation = glm::vec3(5.0f, 2.0f, -3.0f);
glm::vec3 rotation = glm::vec3(45.0f, 30.0f, 60.0f);  // åº¦æ•°
glm::vec3 scale = glm::vec3(2.0f, 1.5f, 0.8f);

// 2. åˆ›å»ºå„ä¸ªå˜æ¢çŸ©é˜µ
glm::mat4 T = glm::translate(glm::mat4(1.0f), translation);

glm::mat4 Rx = glm::rotate(glm::mat4(1.0f), glm::radians(rotation.x), glm::vec3(1, 0, 0));
glm::mat4 Ry = glm::rotate(glm::mat4(1.0f), glm::radians(rotation.y), glm::vec3(0, 1, 0));
glm::mat4 Rz = glm::rotate(glm::mat4(1.0f), glm::radians(rotation.z), glm::vec3(0, 0, 1));
glm::mat4 R = Rz * Ry * Rx;

glm::mat4 S = glm::scale(glm::mat4(1.0f), scale);

// 3. ç»„åˆæˆæ¨¡åž‹çŸ©é˜µ
glm::mat4 M = T * R * S;

// 4. åº”ç”¨åˆ°é¡¶ç‚¹
glm::vec4 vertex = glm::vec4(1.0f, 1.0f, 1.0f, 1.0f);  // åŽŸå§‹é¡¶ç‚¹
glm::vec4 transformedVertex = M * vertex;  // å˜æ¢åŽçš„é¡¶ç‚¹
```

## ðŸ” è°ƒè¯•æŠ€å·§

### 1. åˆ†æ­¥éªŒè¯

```cpp
// åˆ†åˆ«åº”ç”¨æ¯ä¸ªå˜æ¢ï¼Œè§‚å¯Ÿç»“æžœ
glm::vec4 original = glm::vec4(1.0f, 0.0f, 0.0f, 1.0f);
glm::vec4 scaled = S * original;
glm::vec4 rotated = R * scaled;
glm::vec4 translated = T * rotated;

std::cout << "åŽŸå§‹: " << glm::to_string(original) << std::endl;
std::cout << "ç¼©æ”¾åŽ: " << glm::to_string(scaled) << std::endl;
std::cout << "æ—‹è½¬åŽ: " << glm::to_string(rotated) << std::endl;
std::cout << "å¹³ç§»åŽ: " << glm::to_string(translated) << std::endl;
```

### 2. çŸ©é˜µå¯è§†åŒ–

```cpp
void printMatrix(const std::string& name, const glm::mat4& mat) {
    std::cout << name << ":\n";
    for (int i = 0; i < 4; i++) {
        std::cout << "[ ";
        for (int j = 0; j < 4; j++) {
            std::cout << std::fixed << std::setprecision(3) 
                      << std::setw(8) << mat[j][i] << " ";
        }
        std::cout << "]\n";
    }
    std::cout << std::endl;
}
```

## ðŸŽ¯ å¸¸è§åº”ç”¨åœºæ™¯

### 1. æ¸¸æˆç‰©ä½“å˜æ¢
- è§’è‰²ç§»åŠ¨ï¼šå¹³ç§»
- è§’è‰²è½¬å‘ï¼šYè½´æ—‹è½¬
- è§’è‰²ç¼©æ”¾ï¼šç­‰æ¯”ç¼©æ”¾

### 2. åŠ¨ç”»åˆ¶ä½œ
- å…³é”®å¸§ä¹‹é—´çš„æ’å€¼
- éª¨éª¼åŠ¨ç”»çš„å˜æ¢å±‚æ¬¡

### 3. ç‰©ç†æ¨¡æ‹Ÿ
- åˆšä½“çš„ä½ç½®å’Œæ–¹å‘æ›´æ–°
- ç¢°æ’žæ£€æµ‹å‰çš„åæ ‡å˜æ¢

## ðŸ“š è¿›é˜¶æ¦‚å¿µ

### 1. å˜æ¢å±‚æ¬¡ç»“æž„
- çˆ¶å­å…³ç³»çš„å˜æ¢ä¼ é€’
- åœºæ™¯å›¾çš„æž„å»º

### 2. å››å…ƒæ•°æ—‹è½¬
- é¿å…ä¸‡å‘èŠ‚é”é—®é¢˜
- æ›´å¹³æ»‘çš„æ—‹è½¬æ’å€¼

### 3. é€†å˜æ¢
- ä»Žä¸–ç•Œåæ ‡å›žåˆ°æœ¬åœ°åæ ‡
- å…‰çº¿è¿½è¸ªä¸­çš„åº”ç”¨

## ðŸ› ï¸ Demo ä½¿ç”¨æŒ‡å—

è¿è¡Œæˆ‘ä»¬çš„ TSRM Demo æ¥å®žè·µè¿™äº›æ¦‚å¿µï¼š

```bash
./buildDir/TSRM_Demo
```

### æŽ§åˆ¶è¯´æ˜Ž
- **1-4**: é€‰æ‹©ä¸åŒçš„ç«‹æ–¹ä½“
- **WASD + QE**: å¹³ç§»æŽ§åˆ¶
- **æ–¹å‘é”® + ZC**: æ—‹è½¬æŽ§åˆ¶
- **+/-**: ç¼©æ”¾æŽ§åˆ¶
- **M**: æ˜¾ç¤ºçŸ©é˜µä¿¡æ¯
- **A**: åŠ¨ç”»æ¨¡å¼
- **R**: é‡ç½®å½“å‰ç‰©ä½“

### å­¦ä¹ å»ºè®®
1. å…ˆå•ç‹¬æµ‹è¯•æ¯ç§å˜æ¢
2. è§‚å¯Ÿå˜æ¢é¡ºåºçš„å½±å“
3. ä½¿ç”¨çŸ©é˜µæ˜¾ç¤ºåŠŸèƒ½ç†è§£æ•°å­¦åŽŸç†
4. å°è¯•ç»„åˆä¸åŒçš„å˜æ¢

## ðŸ”— ç›¸å…³èµ„æº

- [LearnOpenGL - Transformations](https://learnopengl.com/Getting-started/Transformations)
- [GLM Documentation](https://glm.g-truc.net/0.9.9/index.html)
- [3D Math Primer for Graphics and Game Development](https://gamemath.com/)

---

**è®°ä½**ï¼šç†è§£ TSRM æ˜¯æŽŒæ¡ 3D å›¾å½¢å­¦çš„å…³é”®ç¬¬ä¸€æ­¥ã€‚é€šè¿‡å®žè·µå’Œå®žéªŒï¼Œä½ ä¼šé€æ¸å»ºç«‹èµ·å¯¹ 3D å˜æ¢çš„ç›´è§‰ç†è§£ï¼
